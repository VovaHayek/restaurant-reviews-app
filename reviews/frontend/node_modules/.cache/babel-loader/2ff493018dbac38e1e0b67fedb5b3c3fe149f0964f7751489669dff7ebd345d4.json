{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import RestaurantItem from'../components/RestaurantItem';import UpdateRestaurantForm from'../components/UpdateRestaurantForm';import CreateRestaurantForm from'../components/CreateRestaurantForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const RestaurantsListPage=()=>{let[restaurants,setRestaurants]=useState([]);let[updateRestaurantData,setUpdateRestaurantData]=useState([]);let[showForm,setShowForm]=useState(false);let[accountInfo,setAccountInfo]=useState([]);let[isAuth,setIsAuth]=useState(false);useEffect(()=>{axios.get('http://127.0.0.1:8000/api/restaurants/').then(response=>{setRestaurants(response.data);});axios.get('http://127.0.0.1:8000/auth/account').then(response=>{setAccountInfo(response.data);});if(localStorage.getItem('access_token')!==null){setIsAuth(true);}},[isAuth]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid pt-5\",children:[/*#__PURE__*/_jsx(UpdateRestaurantForm,{restaurant:updateRestaurantData,show:showForm,creatorData:accountInfo}),isAuth?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CreateRestaurantForm,{creatorData:accountInfo})}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-1 d-flex justify-content-around\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center my-5\",children:\"Restaurants List\"}),restaurants.map((restaurant,key)=>/*#__PURE__*/_jsx(RestaurantItem,{restaurant:restaurant,updateForm:setUpdateRestaurantData,showForm:setShowForm,account:accountInfo},key))]})]});};export default RestaurantsListPage;","map":{"version":3,"names":["React","useState","useEffect","axios","RestaurantItem","UpdateRestaurantForm","CreateRestaurantForm","jsx","_jsx","jsxs","_jsxs","RestaurantsListPage","restaurants","setRestaurants","updateRestaurantData","setUpdateRestaurantData","showForm","setShowForm","accountInfo","setAccountInfo","isAuth","setIsAuth","get","then","response","data","localStorage","getItem","className","children","restaurant","show","creatorData","map","key","updateForm","account"],"sources":["C:/Users/vovik/Desktop/restaurant-reviews-app/reviews/frontend/src/pages/RestaurantsListPage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport RestaurantItem from '../components/RestaurantItem';\r\nimport UpdateRestaurantForm from '../components/UpdateRestaurantForm';\r\nimport CreateRestaurantForm from '../components/CreateRestaurantForm';\r\n\r\nconst RestaurantsListPage = () => {\r\n    let [restaurants, setRestaurants] = useState([]);\r\n    let [updateRestaurantData, setUpdateRestaurantData] = useState([]);\r\n    let [showForm, setShowForm] = useState(false);\r\n    let [accountInfo, setAccountInfo] = useState([]);\r\n    let [isAuth, setIsAuth] = useState(false)\r\n\r\n    useEffect(() => {\r\n        axios.get('http://127.0.0.1:8000/api/restaurants/').then((response) => {\r\n            setRestaurants(response.data);\r\n        });\r\n\r\n        axios.get('http://127.0.0.1:8000/auth/account').then((response) => {\r\n            setAccountInfo(response.data);\r\n        });\r\n\r\n        if(localStorage.getItem('access_token') !== null) {\r\n            setIsAuth(true);\r\n        }\r\n    }, [isAuth]);\r\n\r\n  return (\r\n    <div className='container-fluid pt-5'>\r\n        <UpdateRestaurantForm restaurant={updateRestaurantData} show={showForm} creatorData={accountInfo} />\r\n\r\n        {isAuth ? \r\n            <div>\r\n                <CreateRestaurantForm creatorData={accountInfo} />\r\n            </div>\r\n        : \r\n            <div></div>\r\n        }\r\n\r\n        <div className='row mt-1 d-flex justify-content-around'>\r\n            <h1 className='text-center my-5'>Restaurants List</h1>\r\n            {restaurants.map((restaurant, key) => (\r\n                <RestaurantItem key={key} restaurant={restaurant} updateForm={setUpdateRestaurantData} showForm={setShowForm} account={accountInfo} />\r\n            ))}\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RestaurantsListPage"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAChD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,MAAO,CAAAC,oBAAoB,KAAM,oCAAoC,CACrE,MAAO,CAAAC,oBAAoB,KAAM,oCAAoC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtE,KAAM,CAAAC,mBAAmB,CAAGA,CAAA,GAAM,CAC9B,GAAI,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAChD,GAAI,CAACa,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAClE,GAAI,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC7C,GAAI,CAACiB,WAAW,CAAEC,cAAc,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAChD,GAAI,CAACmB,MAAM,CAAEC,SAAS,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAEzCC,SAAS,CAAC,IAAM,CACZC,KAAK,CAACmB,GAAG,CAAC,wCAAwC,CAAC,CAACC,IAAI,CAAEC,QAAQ,EAAK,CACnEX,cAAc,CAACW,QAAQ,CAACC,IAAI,CAAC,CACjC,CAAC,CAAC,CAEFtB,KAAK,CAACmB,GAAG,CAAC,oCAAoC,CAAC,CAACC,IAAI,CAAEC,QAAQ,EAAK,CAC/DL,cAAc,CAACK,QAAQ,CAACC,IAAI,CAAC,CACjC,CAAC,CAAC,CAEF,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,GAAK,IAAI,CAAE,CAC9CN,SAAS,CAAC,IAAI,CAAC,CACnB,CACJ,CAAC,CAAE,CAACD,MAAM,CAAC,CAAC,CAEd,mBACEV,KAAA,QAAKkB,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACjCrB,IAAA,CAACH,oBAAoB,EAACyB,UAAU,CAAEhB,oBAAqB,CAACiB,IAAI,CAAEf,QAAS,CAACgB,WAAW,CAAEd,WAAY,CAAE,CAAC,CAEnGE,MAAM,cACHZ,IAAA,QAAAqB,QAAA,cACIrB,IAAA,CAACF,oBAAoB,EAAC0B,WAAW,CAAEd,WAAY,CAAE,CAAC,CACjD,CAAC,cAENV,IAAA,SAAU,CAAC,cAGfE,KAAA,QAAKkB,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACnDrB,IAAA,OAAIoB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,CACrDjB,WAAW,CAACqB,GAAG,CAAC,CAACH,UAAU,CAAEI,GAAG,gBAC7B1B,IAAA,CAACJ,cAAc,EAAW0B,UAAU,CAAEA,UAAW,CAACK,UAAU,CAAEpB,uBAAwB,CAACC,QAAQ,CAAEC,WAAY,CAACmB,OAAO,CAAElB,WAAY,EAA9GgB,GAAgH,CACxI,CAAC,EACD,CAAC,EACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvB,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}