{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{changeToRegistration}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const submit=async e=>{e.preventDefault();const user={username:username,password:password};const{data}=await axios.post('http://localhost:8000/token/',user,{headers:{'Content-Type':'application/json'},withCredentials:false});localStorage.clear();localStorage.setItem('access_token',data.access);localStorage.setItem('refresh_token',data.refresh);axios.defaults.headers.common['Authorization']=\"Bearer \".concat(data['access']);window.location.href='/';};return/*#__PURE__*/_jsxs(\"form\",{className:\"col-6 d-flex flex-column justify-content-around\",onSubmit:submit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\" my-3 d-flex flex-column justify-content-center align-items-start\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"m-0 p-0\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",onChange:e=>setUsername(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" my-3 d-flex flex-column justify-content-center align-items-start\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"m-0 p-0\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-control btn btn-primary\",children:\"Submit\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:()=>changeToRegistration('registration'),children:\"Registration\"})]})]});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Login","_ref","changeToRegistration","username","setUsername","password","setPassword","submit","e","preventDefault","user","data","post","headers","withCredentials","localStorage","clear","setItem","access","refresh","defaults","common","concat","window","location","href","className","onSubmit","children","type","onChange","target","value","onClick"],"sources":["C:/Users/vovik/Desktop/restaurant-reviews-app/reviews/frontend/src/components/Login.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Login = ({changeToRegistration}) => {\r\n\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const submit = async e => {\r\n        e.preventDefault();\r\n\r\n        const user = {\r\n            username: username,\r\n            password: password\r\n        };\r\n\r\n        const {data} = await axios.post('http://localhost:8000/token/', user, {headers: {'Content-Type': 'application/json'}, withCredentials: false});\r\n    \r\n        localStorage.clear();\r\n        localStorage.setItem('access_token', data.access);\r\n        localStorage.setItem('refresh_token', data.refresh);\r\n\r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${data['access']}`;\r\n\r\n        window.location.href = '/';\r\n    }\r\n\r\n  return (\r\n    <form className='col-6 d-flex flex-column justify-content-around' onSubmit={submit}>\r\n        <h1 className='text-center'>Login</h1>\r\n\r\n        <div className=' my-3 d-flex flex-column justify-content-center align-items-start'>\r\n            <p className='m-0 p-0'>Username</p>\r\n            <input type='text' className='form-control' onChange={(e) => setUsername(e.target.value)}/>\r\n        </div>\r\n\r\n        <div className=' my-3 d-flex flex-column justify-content-center align-items-start'>\r\n            <p className='m-0 p-0'>Password</p>\r\n            <input type='password' className='form-control' onChange={(e) => setPassword(e.target.value)}/>\r\n        </div>\r\n\r\n        <div>\r\n            <button type='submit' className='form-control btn btn-primary'>Submit</button>\r\n        </div>\r\n\r\n        <p className='mt-4'>Don't have an account? <button className='btn btn-success' onClick={() => changeToRegistration('registration')}>Registration</button></p>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Login"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,KAAK,CAAGC,IAAA,EAA4B,IAA3B,CAACC,oBAAoB,CAAC,CAAAD,IAAA,CAEjC,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAE5C,KAAM,CAAAa,MAAM,CAAG,KAAM,CAAAC,CAAC,EAAI,CACtBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,KAAM,CAAAC,IAAI,CAAG,CACTP,QAAQ,CAAEA,QAAQ,CAClBE,QAAQ,CAAEA,QACd,CAAC,CAED,KAAM,CAACM,IAAI,CAAC,CAAG,KAAM,CAAAhB,KAAK,CAACiB,IAAI,CAAC,8BAA8B,CAAEF,IAAI,CAAE,CAACG,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAAEC,eAAe,CAAE,KAAK,CAAC,CAAC,CAE9IC,YAAY,CAACC,KAAK,CAAC,CAAC,CACpBD,YAAY,CAACE,OAAO,CAAC,cAAc,CAAEN,IAAI,CAACO,MAAM,CAAC,CACjDH,YAAY,CAACE,OAAO,CAAC,eAAe,CAAEN,IAAI,CAACQ,OAAO,CAAC,CAEnDxB,KAAK,CAACyB,QAAQ,CAACP,OAAO,CAACQ,MAAM,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAaX,IAAI,CAAC,QAAQ,CAAC,CAAE,CAE3EY,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAC9B,CAAC,CAEH,mBACE1B,KAAA,SAAM2B,SAAS,CAAC,iDAAiD,CAACC,QAAQ,CAAEpB,MAAO,CAAAqB,QAAA,eAC/E/B,IAAA,OAAI6B,SAAS,CAAC,aAAa,CAAAE,QAAA,CAAC,OAAK,CAAI,CAAC,cAEtC7B,KAAA,QAAK2B,SAAS,CAAC,mEAAmE,CAAAE,QAAA,eAC9E/B,IAAA,MAAG6B,SAAS,CAAC,SAAS,CAAAE,QAAA,CAAC,UAAQ,CAAG,CAAC,cACnC/B,IAAA,UAAOgC,IAAI,CAAC,MAAM,CAACH,SAAS,CAAC,cAAc,CAACI,QAAQ,CAAGtB,CAAC,EAAKJ,WAAW,CAACI,CAAC,CAACuB,MAAM,CAACC,KAAK,CAAE,CAAC,CAAC,EAC1F,CAAC,cAENjC,KAAA,QAAK2B,SAAS,CAAC,mEAAmE,CAAAE,QAAA,eAC9E/B,IAAA,MAAG6B,SAAS,CAAC,SAAS,CAAAE,QAAA,CAAC,UAAQ,CAAG,CAAC,cACnC/B,IAAA,UAAOgC,IAAI,CAAC,UAAU,CAACH,SAAS,CAAC,cAAc,CAACI,QAAQ,CAAGtB,CAAC,EAAKF,WAAW,CAACE,CAAC,CAACuB,MAAM,CAACC,KAAK,CAAE,CAAC,CAAC,EAC9F,CAAC,cAENnC,IAAA,QAAA+B,QAAA,cACI/B,IAAA,WAAQgC,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,8BAA8B,CAAAE,QAAA,CAAC,QAAM,CAAQ,CAAC,CAC7E,CAAC,cAEN7B,KAAA,MAAG2B,SAAS,CAAC,MAAM,CAAAE,QAAA,EAAC,yBAAuB,cAAA/B,IAAA,WAAQ6B,SAAS,CAAC,iBAAiB,CAACO,OAAO,CAAEA,CAAA,GAAM/B,oBAAoB,CAAC,cAAc,CAAE,CAAA0B,QAAA,CAAC,cAAY,CAAQ,CAAC,EAAG,CAAC,EAC3J,CAAC,CAEX,CAAC,CAED,cAAe,CAAA5B,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}