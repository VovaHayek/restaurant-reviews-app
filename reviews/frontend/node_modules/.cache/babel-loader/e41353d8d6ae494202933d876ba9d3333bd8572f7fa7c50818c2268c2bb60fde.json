{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{ReactComponent as CloseButton}from'../assets/close.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UpdateRestaurantForm=_ref=>{let{restaurant,show,creatorData}=_ref;let[showForm,setShowForm]=useState(show);let[oldRestaurantName,setOldRestaurantName]=useState(restaurant===null||restaurant===void 0?void 0:restaurant.title);let[updatedRestaurantName,setUpdatedRestaurantName]=useState(restaurant===null||restaurant===void 0?void 0:restaurant.title);let[updatedRestaurantAddress,setUpdatedRestaurantAddress]=useState(restaurant===null||restaurant===void 0?void 0:restaurant.address);useEffect(()=>{setShowForm(show);setOldRestaurantName(restaurant===null||restaurant===void 0?void 0:restaurant.title);setUpdatedRestaurantName(restaurant===null||restaurant===void 0?void 0:restaurant.title);setUpdatedRestaurantAddress(restaurant===null||restaurant===void 0?void 0:restaurant.address);},[show,restaurant]);const updateRestaurantData=async e=>{e.preventDefault();const updatedRestaurantData={id:restaurant===null||restaurant===void 0?void 0:restaurant.id,title:updatedRestaurantName,address:updatedRestaurantAddress,type_of_cuisine:restaurant===null||restaurant===void 0?void 0:restaurant.type_of_cuisine.id,creator:creatorData===null||creatorData===void 0?void 0:creatorData.id};console.log(updatedRestaurantData);axios.put(\"http://127.0.0.1:8000/api/restaurants/\".concat(oldRestaurantName,\"/\"),updatedRestaurantData,{headers:{'Content-Type':'application/json'},withCredentials:false}).then(response=>{window.location.reload();});};return/*#__PURE__*/_jsx(\"div\",{className:showForm===true?'container-fluid position-fixed top-0 start-0 m-0 p-0 bg-dark bg-opacity-75 d-flex justify-content-center align-items-center':'invisible opacity-0 position-absolute',style:{height:\"100vh\"},children:/*#__PURE__*/_jsxs(\"form\",{className:\"col-6 bg-black p-5 rounded-3\",onSubmit:updateRestaurantData,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:e=>setShowForm(false),children:/*#__PURE__*/_jsx(CloseButton,{})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-white\",children:\"Update Restaurant Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white m-0\",children:\"Restaurant Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:updatedRestaurantName,onChange:e=>setUpdatedRestaurantName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white m-0\",children:\"Restaurant Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:updatedRestaurantAddress,onChange:e=>setUpdatedRestaurantAddress(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-control btn btn-success\",children:\"Update\"})})]})});};export default UpdateRestaurantForm;","map":{"version":3,"names":["React","useEffect","useState","axios","ReactComponent","CloseButton","jsx","_jsx","jsxs","_jsxs","UpdateRestaurantForm","_ref","restaurant","show","creatorData","showForm","setShowForm","oldRestaurantName","setOldRestaurantName","title","updatedRestaurantName","setUpdatedRestaurantName","updatedRestaurantAddress","setUpdatedRestaurantAddress","address","updateRestaurantData","e","preventDefault","updatedRestaurantData","id","type_of_cuisine","creator","console","log","put","concat","headers","withCredentials","then","response","window","location","reload","className","style","height","children","onSubmit","onClick","type","value","onChange","target"],"sources":["C:/Users/vovik/Desktop/restaurant-reviews-app/reviews/frontend/src/components/UpdateRestaurantForm.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport { ReactComponent as CloseButton } from '../assets/close.svg';\r\n\r\nconst UpdateRestaurantForm = ({restaurant, show, creatorData}) => {\r\n    \r\n    let [showForm, setShowForm] = useState(show);\r\n    let [oldRestaurantName, setOldRestaurantName] = useState(restaurant?.title)\r\n    let [updatedRestaurantName, setUpdatedRestaurantName] = useState(restaurant?.title);\r\n    let [updatedRestaurantAddress, setUpdatedRestaurantAddress] = useState(restaurant?.address);\r\n\r\n    useEffect(() => {\r\n        setShowForm(show);\r\n        setOldRestaurantName(restaurant?.title);\r\n        setUpdatedRestaurantName(restaurant?.title);\r\n        setUpdatedRestaurantAddress(restaurant?.address);\r\n    }, [show, restaurant]);\r\n\r\n    const updateRestaurantData = async e => {\r\n        e.preventDefault();\r\n\r\n        const updatedRestaurantData = {\r\n            id: restaurant?.id,\r\n            title: updatedRestaurantName,\r\n            address: updatedRestaurantAddress,\r\n            type_of_cuisine: restaurant?.type_of_cuisine.id,\r\n            creator: creatorData?.id,\r\n        }\r\n\r\n        console.log(updatedRestaurantData);\r\n\r\n        axios.put(`http://127.0.0.1:8000/api/restaurants/${oldRestaurantName}/`, updatedRestaurantData, {\r\n            headers: {'Content-Type': 'application/json'},\r\n            withCredentials: false}).then((response) => {\r\n                window.location.reload();\r\n        })\r\n    }\r\n\r\n  return (\r\n    <div className={showForm === true ? 'container-fluid position-fixed top-0 start-0 m-0 p-0 bg-dark bg-opacity-75 d-flex justify-content-center align-items-center' : 'invisible opacity-0 position-absolute'} style={{height: \"100vh\"}}>\r\n        <form className='col-6 bg-black p-5 rounded-3' onSubmit={updateRestaurantData}>\r\n            <div>\r\n                <a onClick={(e) => setShowForm(false)}><CloseButton /></a>\r\n            </div>\r\n\r\n            <h1 className='text-white'>Update Restaurant Info</h1>\r\n\r\n            <div className='my-3'>\r\n                <p className='text-white m-0'>Restaurant Name</p>\r\n                <input type='text' value={updatedRestaurantName} onChange={(e) => setUpdatedRestaurantName(e.target.value)} />\r\n            </div>\r\n\r\n            <div className='my-3'>\r\n                <p className='text-white m-0'>Restaurant Address</p>\r\n                <input type='text' value={updatedRestaurantAddress} onChange={(e) => setUpdatedRestaurantAddress(e.target.value)} />\r\n            </div>\r\n\r\n            <div>\r\n                <button type='submit' className='form-control btn btn-success'>Update</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UpdateRestaurantForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}