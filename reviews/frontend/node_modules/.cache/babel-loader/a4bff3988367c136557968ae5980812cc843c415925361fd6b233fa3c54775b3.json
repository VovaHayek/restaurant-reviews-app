{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import RestaurantItem from'../components/RestaurantItem';import UpdateRestaurantForm from'../components/UpdateRestaurantForm';import CreateRestaurantForm from'../components/CreateRestaurantForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const RestaurantsListPage=()=>{let[restaurants,setRestaurants]=useState([]);let[updateRestaurantData,setUpdateRestaurantData]=useState([]);let[showForm,setShowForm]=useState(false);let[accountInfo,setAccountInfo]=useState([]);let[isAuth,setIsAuth]=useState(false);let[deleteRestaurant,setDeleteRestaurant]=useState('');useEffect(()=>{console.log(deleteRestaurant);axios.get('http://127.0.0.1:8000/api/restaurants/').then(response=>{setRestaurants(response.data);});axios.get('http://127.0.0.1:8000/auth/account').then(response=>{setAccountInfo(response.data);});if(localStorage.getItem('access_token')!==null){setIsAuth(true);}},[isAuth]);useEffect(()=>{setDeleteRestaurant('');axios.get('http://127.0.0.1:8000/api/restaurants/').then(response=>{setRestaurants(response.data);});},[deleteRestaurant]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid pt-5\",children:[/*#__PURE__*/_jsx(UpdateRestaurantForm,{restaurant:updateRestaurantData,hide:setShowForm,show:showForm,creatorData:accountInfo}),isAuth?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CreateRestaurantForm,{creatorData:accountInfo})}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-1 d-flex justify-content-around\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center my-5\",children:\"Restaurants List\"}),restaurants.map((restaurant,key)=>/*#__PURE__*/_jsx(RestaurantItem,{restaurant:restaurant,updateForm:setUpdateRestaurantData,showForm:setShowForm,account:accountInfo,deleteRestaurantButton:setDeleteRestaurant},key))]})]});};export default RestaurantsListPage;","map":{"version":3,"names":["React","useState","useEffect","axios","RestaurantItem","UpdateRestaurantForm","CreateRestaurantForm","jsx","_jsx","jsxs","_jsxs","RestaurantsListPage","restaurants","setRestaurants","updateRestaurantData","setUpdateRestaurantData","showForm","setShowForm","accountInfo","setAccountInfo","isAuth","setIsAuth","deleteRestaurant","setDeleteRestaurant","console","log","get","then","response","data","localStorage","getItem","className","children","restaurant","hide","show","creatorData","map","key","updateForm","account","deleteRestaurantButton"],"sources":["C:/Users/vovik/Desktop/restaurant-reviews-app/reviews/frontend/src/pages/RestaurantsListPage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport RestaurantItem from '../components/RestaurantItem';\r\nimport UpdateRestaurantForm from '../components/UpdateRestaurantForm';\r\nimport CreateRestaurantForm from '../components/CreateRestaurantForm';\r\n\r\nconst RestaurantsListPage = () => {\r\n    let [restaurants, setRestaurants] = useState([]);\r\n    let [updateRestaurantData, setUpdateRestaurantData] = useState([]);\r\n    let [showForm, setShowForm] = useState(false);\r\n    let [accountInfo, setAccountInfo] = useState([]);\r\n    let [isAuth, setIsAuth] = useState(false);\r\n    let [deleteRestaurant, setDeleteRestaurant] = useState('');\r\n\r\n    useEffect(() => {\r\n        console.log(deleteRestaurant);\r\n        axios.get('http://127.0.0.1:8000/api/restaurants/').then((response) => {\r\n            setRestaurants(response.data);\r\n        });\r\n\r\n        axios.get('http://127.0.0.1:8000/auth/account').then((response) => {\r\n            setAccountInfo(response.data);\r\n        });\r\n\r\n        if(localStorage.getItem('access_token') !== null) {\r\n            setIsAuth(true);\r\n        }\r\n    }, [isAuth]);\r\n\r\n    useEffect(() => {\r\n        setDeleteRestaurant('');\r\n        axios.get('http://127.0.0.1:8000/api/restaurants/').then((response) => {\r\n            setRestaurants(response.data);\r\n        });\r\n    }, [deleteRestaurant])\r\n\r\n  return (\r\n    <div className='container-fluid pt-5'>\r\n        <UpdateRestaurantForm restaurant={updateRestaurantData} hide={setShowForm} show={showForm} creatorData={accountInfo} />\r\n\r\n        {isAuth ? \r\n            <div>\r\n                <CreateRestaurantForm creatorData={accountInfo} />\r\n            </div>\r\n        : \r\n            <div></div>\r\n        }\r\n\r\n        <div className='row mt-1 d-flex justify-content-around'>\r\n            <h1 className='text-center my-5'>Restaurants List</h1>\r\n            {restaurants.map((restaurant, key) => (\r\n                <RestaurantItem key={key} restaurant={restaurant} updateForm={setUpdateRestaurantData} showForm={setShowForm} account={accountInfo} deleteRestaurantButton={setDeleteRestaurant} />\r\n            ))}\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RestaurantsListPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}