{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{ReactComponent as CloseButton}from'../assets/close.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UpdateRestaurantForm=_ref=>{var _restaurant$type_of_c;let{restaurant,hide,show,creatorData}=_ref;let[showForm,setShowForm]=useState(show);let[typesOfCuisine,setTypesOfCuisine]=useState([]);let[oldRestaurantName,setOldRestaurantName]=useState(restaurant===null||restaurant===void 0?void 0:restaurant.title);let[updatedRestaurantName,setUpdatedRestaurantName]=useState(restaurant===null||restaurant===void 0?void 0:restaurant.title);let[updatedRestaurantAddress,setUpdatedRestaurantAddress]=useState(restaurant===null||restaurant===void 0?void 0:restaurant.address);let[updatedRestaurantCuisine,setUpdatedRestaurantCuisine]=useState(restaurant===null||restaurant===void 0?void 0:(_restaurant$type_of_c=restaurant.type_of_cuisine)===null||_restaurant$type_of_c===void 0?void 0:_restaurant$type_of_c.id);useEffect(()=>{var _restaurant$type_of_c2;axios.get('http://127.0.0.1:8000/api/type-of-cuisine/').then(response=>{setTypesOfCuisine(response.data);});setShowForm(show);setOldRestaurantName(restaurant===null||restaurant===void 0?void 0:restaurant.title);setUpdatedRestaurantName(restaurant===null||restaurant===void 0?void 0:restaurant.title);setUpdatedRestaurantAddress(restaurant===null||restaurant===void 0?void 0:restaurant.address);setUpdatedRestaurantCuisine(restaurant===null||restaurant===void 0?void 0:(_restaurant$type_of_c2=restaurant.type_of_cuisine)===null||_restaurant$type_of_c2===void 0?void 0:_restaurant$type_of_c2.id);},[show,restaurant]);const updateRestaurantData=async e=>{e.preventDefault();const updatedRestaurantData={id:restaurant===null||restaurant===void 0?void 0:restaurant.id,title:updatedRestaurantName,address:updatedRestaurantAddress,type_of_cuisine:updatedRestaurantCuisine,creator:creatorData===null||creatorData===void 0?void 0:creatorData.id};axios.put(\"http://127.0.0.1:8000/api/restaurants/\".concat(oldRestaurantName,\"/\"),updatedRestaurantData,{headers:{'Content-Type':'application/json'},withCredentials:false}).then(response=>{window.location.reload();});};return/*#__PURE__*/_jsx(\"div\",{className:showForm===true?'container-fluid position-fixed top-0 start-0 m-0 p-0 bg-dark bg-opacity-75 d-flex justify-content-center align-items-center':'invisible opacity-0 position-absolute',style:{height:\"100vh\"},children:/*#__PURE__*/_jsxs(\"form\",{className:\"col-6 bg-black p-5 rounded-3\",onSubmit:updateRestaurantData,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:e=>hide(false),children:/*#__PURE__*/_jsx(CloseButton,{})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-white\",children:\"Update Restaurant Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white m-0\",children:\"Restaurant Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:updatedRestaurantName,onChange:e=>setUpdatedRestaurantName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white m-0\",children:\"Restaurant Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:updatedRestaurantAddress,onChange:e=>setUpdatedRestaurantAddress(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white m-0\",children:\"Restaurant Cuisine\"}),/*#__PURE__*/_jsx(\"select\",{className:\"form-control\",value:updatedRestaurantCuisine,onChange:e=>setUpdatedRestaurantCuisine(e.target.value),children:typesOfCuisine.map((cuisineType,key)=>/*#__PURE__*/_jsx(\"option\",{value:cuisineType.id,children:cuisineType.name},key))})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-control btn btn-success\",children:\"Update\"})})]})});};export default UpdateRestaurantForm;","map":{"version":3,"names":["React","useEffect","useState","axios","ReactComponent","CloseButton","jsx","_jsx","jsxs","_jsxs","UpdateRestaurantForm","_ref","_restaurant$type_of_c","restaurant","hide","show","creatorData","showForm","setShowForm","typesOfCuisine","setTypesOfCuisine","oldRestaurantName","setOldRestaurantName","title","updatedRestaurantName","setUpdatedRestaurantName","updatedRestaurantAddress","setUpdatedRestaurantAddress","address","updatedRestaurantCuisine","setUpdatedRestaurantCuisine","type_of_cuisine","id","_restaurant$type_of_c2","get","then","response","data","updateRestaurantData","e","preventDefault","updatedRestaurantData","creator","put","concat","headers","withCredentials","window","location","reload","className","style","height","children","onSubmit","onClick","type","value","onChange","target","map","cuisineType","key","name"],"sources":["C:/Users/vovik/Desktop/restaurant-reviews-app/reviews/frontend/src/components/UpdateRestaurantForm.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport { ReactComponent as CloseButton } from '../assets/close.svg';\r\n\r\nconst UpdateRestaurantForm = ({restaurant, hide, show, creatorData}) => {\r\n    \r\n    let [showForm, setShowForm] = useState(show);\r\n    let [typesOfCuisine, setTypesOfCuisine] = useState([])\r\n    let [oldRestaurantName, setOldRestaurantName] = useState(restaurant?.title)\r\n    let [updatedRestaurantName, setUpdatedRestaurantName] = useState(restaurant?.title);\r\n    let [updatedRestaurantAddress, setUpdatedRestaurantAddress] = useState(restaurant?.address);\r\n    let [updatedRestaurantCuisine, setUpdatedRestaurantCuisine] = useState(restaurant?.type_of_cuisine?.id);\r\n\r\n    useEffect(() => {\r\n        axios.get('http://127.0.0.1:8000/api/type-of-cuisine/').then((response) => {\r\n            setTypesOfCuisine(response.data);\r\n        });\r\n\r\n        setShowForm(show);\r\n        setOldRestaurantName(restaurant?.title);\r\n        setUpdatedRestaurantName(restaurant?.title);\r\n        setUpdatedRestaurantAddress(restaurant?.address);\r\n        setUpdatedRestaurantCuisine(restaurant?.type_of_cuisine?.id);\r\n    }, [show, restaurant]);\r\n\r\n    const updateRestaurantData = async e => {\r\n        e.preventDefault();\r\n\r\n        const updatedRestaurantData = {\r\n            id: restaurant?.id,\r\n            title: updatedRestaurantName,\r\n            address: updatedRestaurantAddress,\r\n            type_of_cuisine: updatedRestaurantCuisine,\r\n            creator: creatorData?.id,\r\n        }\r\n\r\n        axios.put(`http://127.0.0.1:8000/api/restaurants/${oldRestaurantName}/`, updatedRestaurantData, {\r\n            headers: {'Content-Type': 'application/json'},\r\n            withCredentials: false}).then((response) => {\r\n                window.location.reload();\r\n        })\r\n    }\r\n\r\n  return (\r\n    <div className={showForm === true ? 'container-fluid position-fixed top-0 start-0 m-0 p-0 bg-dark bg-opacity-75 d-flex justify-content-center align-items-center' : 'invisible opacity-0 position-absolute'} style={{height: \"100vh\"}}>\r\n        <form className='col-6 bg-black p-5 rounded-3' onSubmit={updateRestaurantData}>\r\n            <div>\r\n                <a onClick={(e) => hide(false)}><CloseButton /></a>\r\n            </div>\r\n\r\n            <h1 className='text-white'>Update Restaurant Info</h1>\r\n\r\n            <div className='my-3'>\r\n                <p className='text-white m-0'>Restaurant Name</p>\r\n                <input type='text' value={updatedRestaurantName} onChange={(e) => setUpdatedRestaurantName(e.target.value)} />\r\n            </div>\r\n\r\n            <div className='my-3'>\r\n                <p className='text-white m-0'>Restaurant Address</p>\r\n                <input type='text' value={updatedRestaurantAddress} onChange={(e) => setUpdatedRestaurantAddress(e.target.value)} />\r\n            </div>\r\n\r\n            <div className='my-3'>\r\n                <p className='text-white m-0'>Restaurant Cuisine</p>\r\n                <select className='form-control' value={updatedRestaurantCuisine} onChange={e => setUpdatedRestaurantCuisine(e.target.value)}>\r\n                    {typesOfCuisine.map((cuisineType, key) => (\r\n                        <option key={key} value={cuisineType.id}>{cuisineType.name}</option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div>\r\n                <button type='submit' className='form-control btn btn-success'>Update</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UpdateRestaurantForm"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,OAASC,cAAc,GAAI,CAAAC,WAAW,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpE,KAAM,CAAAC,oBAAoB,CAAGC,IAAA,EAA2C,KAAAC,qBAAA,IAA1C,CAACC,UAAU,CAAEC,IAAI,CAAEC,IAAI,CAAEC,WAAW,CAAC,CAAAL,IAAA,CAE/D,GAAI,CAACM,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAACa,IAAI,CAAC,CAC5C,GAAI,CAACI,cAAc,CAAEC,iBAAiB,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACtD,GAAI,CAACmB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGpB,QAAQ,CAACW,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEU,KAAK,CAAC,CAC3E,GAAI,CAACC,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGvB,QAAQ,CAACW,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEU,KAAK,CAAC,CACnF,GAAI,CAACG,wBAAwB,CAAEC,2BAA2B,CAAC,CAAGzB,QAAQ,CAACW,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEe,OAAO,CAAC,CAC3F,GAAI,CAACC,wBAAwB,CAAEC,2BAA2B,CAAC,CAAG5B,QAAQ,CAACW,UAAU,SAAVA,UAAU,kBAAAD,qBAAA,CAAVC,UAAU,CAAEkB,eAAe,UAAAnB,qBAAA,iBAA3BA,qBAAA,CAA6BoB,EAAE,CAAC,CAEvG/B,SAAS,CAAC,IAAM,KAAAgC,sBAAA,CACZ9B,KAAK,CAAC+B,GAAG,CAAC,4CAA4C,CAAC,CAACC,IAAI,CAAEC,QAAQ,EAAK,CACvEhB,iBAAiB,CAACgB,QAAQ,CAACC,IAAI,CAAC,CACpC,CAAC,CAAC,CAEFnB,WAAW,CAACH,IAAI,CAAC,CACjBO,oBAAoB,CAACT,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEU,KAAK,CAAC,CACvCE,wBAAwB,CAACZ,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEU,KAAK,CAAC,CAC3CI,2BAA2B,CAACd,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEe,OAAO,CAAC,CAChDE,2BAA2B,CAACjB,UAAU,SAAVA,UAAU,kBAAAoB,sBAAA,CAAVpB,UAAU,CAAEkB,eAAe,UAAAE,sBAAA,iBAA3BA,sBAAA,CAA6BD,EAAE,CAAC,CAChE,CAAC,CAAE,CAACjB,IAAI,CAAEF,UAAU,CAAC,CAAC,CAEtB,KAAM,CAAAyB,oBAAoB,CAAG,KAAM,CAAAC,CAAC,EAAI,CACpCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,KAAM,CAAAC,qBAAqB,CAAG,CAC1BT,EAAE,CAAEnB,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEmB,EAAE,CAClBT,KAAK,CAAEC,qBAAqB,CAC5BI,OAAO,CAAEF,wBAAwB,CACjCK,eAAe,CAAEF,wBAAwB,CACzCa,OAAO,CAAE1B,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEgB,EAC1B,CAAC,CAED7B,KAAK,CAACwC,GAAG,0CAAAC,MAAA,CAA0CvB,iBAAiB,MAAKoB,qBAAqB,CAAE,CAC5FI,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAC7CC,eAAe,CAAE,KAAK,CAAC,CAAC,CAACX,IAAI,CAAEC,QAAQ,EAAK,CACxCW,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAChC,CAAC,CAAC,CACN,CAAC,CAEH,mBACE1C,IAAA,QAAK2C,SAAS,CAAEjC,QAAQ,GAAK,IAAI,CAAG,6HAA6H,CAAG,uCAAwC,CAACkC,KAAK,CAAE,CAACC,MAAM,CAAE,OAAO,CAAE,CAAAC,QAAA,cAClO5C,KAAA,SAAMyC,SAAS,CAAC,8BAA8B,CAACI,QAAQ,CAAEhB,oBAAqB,CAAAe,QAAA,eAC1E9C,IAAA,QAAA8C,QAAA,cACI9C,IAAA,MAAGgD,OAAO,CAAGhB,CAAC,EAAKzB,IAAI,CAAC,KAAK,CAAE,CAAAuC,QAAA,cAAC9C,IAAA,CAACF,WAAW,GAAE,CAAC,CAAG,CAAC,CAClD,CAAC,cAENE,IAAA,OAAI2C,SAAS,CAAC,YAAY,CAAAG,QAAA,CAAC,wBAAsB,CAAI,CAAC,cAEtD5C,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAAAG,QAAA,eACjB9C,IAAA,MAAG2C,SAAS,CAAC,gBAAgB,CAAAG,QAAA,CAAC,iBAAe,CAAG,CAAC,cACjD9C,IAAA,UAAOiD,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEjC,qBAAsB,CAACkC,QAAQ,CAAGnB,CAAC,EAAKd,wBAAwB,CAACc,CAAC,CAACoB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,EAC7G,CAAC,cAENhD,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAAAG,QAAA,eACjB9C,IAAA,MAAG2C,SAAS,CAAC,gBAAgB,CAAAG,QAAA,CAAC,oBAAkB,CAAG,CAAC,cACpD9C,IAAA,UAAOiD,IAAI,CAAC,MAAM,CAACC,KAAK,CAAE/B,wBAAyB,CAACgC,QAAQ,CAAGnB,CAAC,EAAKZ,2BAA2B,CAACY,CAAC,CAACoB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,EACnH,CAAC,cAENhD,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAAAG,QAAA,eACjB9C,IAAA,MAAG2C,SAAS,CAAC,gBAAgB,CAAAG,QAAA,CAAC,oBAAkB,CAAG,CAAC,cACpD9C,IAAA,WAAQ2C,SAAS,CAAC,cAAc,CAACO,KAAK,CAAE5B,wBAAyB,CAAC6B,QAAQ,CAAEnB,CAAC,EAAIT,2BAA2B,CAACS,CAAC,CAACoB,MAAM,CAACF,KAAK,CAAE,CAAAJ,QAAA,CACxHlC,cAAc,CAACyC,GAAG,CAAC,CAACC,WAAW,CAAEC,GAAG,gBACjCvD,IAAA,WAAkBkD,KAAK,CAAEI,WAAW,CAAC7B,EAAG,CAAAqB,QAAA,CAAEQ,WAAW,CAACE,IAAI,EAA7CD,GAAsD,CACtE,CAAC,CACE,CAAC,EACR,CAAC,cAENvD,IAAA,QAAA8C,QAAA,cACI9C,IAAA,WAAQiD,IAAI,CAAC,QAAQ,CAACN,SAAS,CAAC,8BAA8B,CAAAG,QAAA,CAAC,QAAM,CAAQ,CAAC,CAC7E,CAAC,EACJ,CAAC,CACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3C,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}